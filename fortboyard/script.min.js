function popUp() { Swal.fire({ title: "Мы с вами свяжемся", color: "#fff", confirmButtonColor: "#ff7c03", html: '<form class="form" action="" id="popup__form">\n            <input type="tel" data-tel-input placeholder="+7 900 000 00 00" maxlength="18" />\n            <button class="primary-btn">\n                <p class="content">забронировать</p>\n                <span class="bottom-part"></span>\n            </button>\n        </form>', showConfirmButton: !1, background: "#222", didOpen: e => { console.log(e), document.querySelector("#popup__form").addEventListener("submit", sendMail); const t = document.querySelector("#popup__form input[data-tel-input]"); t.addEventListener("keydown", onPhoneKeyDown), t.addEventListener("input", onPhoneInput, !1), t.addEventListener("paste", onPhonePaste, !1) } }) } function sendMail(e) { e.preventDefault(); const t = new FormData(this); fetch("process_form.php", { method: "POST", body: t }).then(e => { if (!e.ok) throw new Error("Произошла ошибка"); return e.text() }).then(e => { Swal.fire({ icon: "success", title: "Спасибо ваша заявка принята!", color: "#fff", confirmButtonColor: "#ff7c03", background: "#222" }) }).catch(e => { console.error("Ошибка:", e), Swal.fire({ icon: "error", color: "#fff", title: "Ошибка!", text: "Что-то пошло не так.", background: "#222", confirmButtonColor: "#ff7c03" }) }) } document.addEventListener("DOMContentLoaded", function () { document.getElementById("reserve__form").addEventListener("submit", sendMail), document.getElementById("feadback__form").addEventListener("submit", sendMail); const e = document.querySelector(".menu"), t = document.querySelector(".hamburger"), n = document.body, o = document.querySelector("html"); t.addEventListener("click", () => { e.classList.toggle("is-active"), t.classList.toggle("is-active"), n.classList.toggle("no-scroll"), o.classList.toggle("no-scroll") }); const s = document.querySelectorAll(".smooth-scroll"); for (let r of s) r.addEventListener("click", function (s) { s.preventDefault(), e.classList.remove("is-active"), t.classList.remove("is-active"), n.classList.remove("no-scroll"), o.classList.remove("no-scroll"); const l = r.getAttribute("href"); console.log(l), document.querySelector(l).scrollIntoView({ behavior: "smooth" }) }); const r = document.querySelector(".events swiper-container"); if (r) { const e = { breakpoints: { 0: { slidesOffsetBefore: 20, slidesPerView: "auto", spaceBetween: 7 }, 992: { slidesOffsetBefore: 20, slidesPerView: 4.2, spaceBetween: 20 }, 1200: { slidesOffsetBefore: 0, slidesPerView: 4, spaceBetween: 20 } } }; Object.assign(r, e), r.initialize() } const l = document.querySelector(".gallery swiper-container"); l.addEventListener("swiperslidechange", e => { a[l.swiper.previousIndex].pause() }); const i = document.querySelector(".reviews swiper-container"); Object.assign(i, { breakpoints: { 0: { slidesPerView: 1 }, 768: { slidesPerView: 2, spaceBetween: 0 }, 1400: { slidesPerView: 2.4, spaceBetween: -50 } } }), i.initialize(), i.addEventListener("swiperslidechange", e => { c[i.swiper.previousIndex].pause() }), i.addEventListener("click", e => { const t = e.target.classList[0]; "swiper-slide-next" == t ? i.swiper.slideNext() : "swiper-slide-prev" == t && i.swiper.slidePrev() }); const a = Plyr.setup(".gallery-player", { controls: ["play-large", "play", "progress", "mute", "volume", "fullscreen"] }), c = (new Plyr("#about-player", { controls: ["play-large", "play", "progress", "mute", "volume", "fullscreen"] }), Plyr.setup(".reviews-player", { controls: ["play-large", "play", "progress", "mute", "volume", "settings", "fullscreen"], settings: ["quality", "speed"] })), u = GLightbox({ keyboardNavigation: !0, touchNavigation: !0 }); u.on("open", () => { l.swiper.disable() }), u.on("close", () => { l.swiper.enable() }); var d = document.querySelectorAll("input[data-tel-input]"); for (var p of d) p.addEventListener("keydown", onPhoneKeyDown), p.addEventListener("input", onPhoneInput, !1), p.addEventListener("paste", onPhonePaste, !1) }); var getInputNumbersValue = function (e) { return e.value.replace(/\D/g, "") }, onPhonePaste = function (e) { var t = e.target, n = getInputNumbersValue(t), o = e.clipboardData || window.clipboardData; if (o) { var s = o.getData("Text"); if (/\D/g.test(s)) return void (t.value = n) } }, onPhoneInput = function (e) { var t = e.target, n = getInputNumbersValue(t), o = t.selectionStart, s = ""; if (!n) return t.value = ""; if (t.value.length == o) { if (["7", "8", "9"].indexOf(n[0]) > -1) { "9" == n[0] && (n = "7" + n); var r = "8" == n[0] ? "8" : "+7"; s = t.value = r + " ", n.length > 1 && (s += "(" + n.substring(1, 4)), n.length >= 5 && (s += ") " + n.substring(4, 7)), n.length >= 8 && (s += "-" + n.substring(7, 9)), n.length >= 10 && (s += "-" + n.substring(9, 11)) } else s = ""; t.value = s } else e.data && /\D/g.test(e.data) && (t.value = n) }, onPhoneKeyDown = function (e) { var t = e.target.value.replace(/\D/g, ""); 8 == e.keyCode && 1 == t.length && (e.target.value = "") };
